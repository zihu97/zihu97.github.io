const t=JSON.parse('{"key":"v-08dd42aa","path":"/posts/linux/virtualization/qemu/MSI-X/QEMU%20MSIX.html","title":"VFIO框架源码分析（十）- QEMU VFIO 中断机制从 INTx 到 MSI-X 的模拟演进","lang":"zh-CN","frontmatter":{"date":"2025-11-27T00:00:00.000Z","article":true,"category":["tech"],"tag":["vfio","qemu"],"description":"VFIO框架源码分析（十）- QEMU VFIO 中断机制从 INTx 到 MSI-X 的模拟演进 简介与背景 中断是设备与 CPU 通信的命脉。 在直通场景下，硬件产生物理中断，必须准确、低延迟地投递给虚拟机的 vCPU。 QEMU 必须模拟 PCI 规范定义的三种中断模式：INTx（传统电平中断）、MSI（消息中断）和 MSI-X（扩展消息中断）。 其中，MSI-X 是现代高性能网卡和存储控制器的标配。 如果中断处理路径过长（例如经过 QEMU 用户态转发），会带来巨大的性能抖动。","head":[["meta",{"property":"og:url","content":"https://zihu97.github.io/posts/linux/virtualization/qemu/MSI-X/QEMU%20MSIX.html"}],["meta",{"property":"og:site_name","content":"紫狐"}],["meta",{"property":"og:title","content":"VFIO框架源码分析（十）- QEMU VFIO 中断机制从 INTx 到 MSI-X 的模拟演进"}],["meta",{"property":"og:description","content":"VFIO框架源码分析（十）- QEMU VFIO 中断机制从 INTx 到 MSI-X 的模拟演进 简介与背景 中断是设备与 CPU 通信的命脉。 在直通场景下，硬件产生物理中断，必须准确、低延迟地投递给虚拟机的 vCPU。 QEMU 必须模拟 PCI 规范定义的三种中断模式：INTx（传统电平中断）、MSI（消息中断）和 MSI-X（扩展消息中断）。 其中，MSI-X 是现代高性能网卡和存储控制器的标配。 如果中断处理路径过长（例如经过 QEMU 用户态转发），会带来巨大的性能抖动。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://zihu97.github.io/"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-11-23T05:36:29.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"VFIO框架源码分析（十）- QEMU VFIO 中断机制从 INTx 到 MSI-X 的模拟演进"}],["meta",{"property":"article:author","content":"紫狐"}],["meta",{"property":"article:tag","content":"vfio"}],["meta",{"property":"article:tag","content":"qemu"}],["meta",{"property":"article:published_time","content":"2025-11-27T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-11-23T05:36:29.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"VFIO框架源码分析（十）- QEMU VFIO 中断机制从 INTx 到 MSI-X 的模拟演进\\",\\"image\\":[\\"https://zihu97.github.io/\\"],\\"datePublished\\":\\"2025-11-27T00:00:00.000Z\\",\\"dateModified\\":\\"2025-11-23T05:36:29.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"紫狐\\",\\"url\\":\\"https://zihu97.github.io/\\"}]}"]]},"headers":[{"level":2,"title":"简介与背景","slug":"简介与背景","link":"#简介与背景","children":[]},{"level":2,"title":"逐层代码拆解","slug":"逐层代码拆解","link":"#逐层代码拆解","children":[{"level":3,"title":"准备阶段：vfio_prepare_kvm_msi_virq_batch","slug":"准备阶段-vfio-prepare-kvm-msi-virq-batch","link":"#准备阶段-vfio-prepare-kvm-msi-virq-batch","children":[]},{"level":3,"title":"注册通知器：msix_set_vector_notifiers","slug":"注册通知器-msix-set-vector-notifiers","link":"#注册通知器-msix-set-vector-notifiers","children":[]},{"level":3,"title":"建立直通路径：vfio_msix_vector_do_use","slug":"建立直通路径-vfio-msix-vector-do-use","link":"#建立直通路径-vfio-msix-vector-do-use","children":[]},{"level":3,"title":"异常处理与降级","slug":"异常处理与降级","link":"#异常处理与降级","children":[]}]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]},{"level":2,"title":"关于作者","slug":"关于作者","link":"#关于作者","children":[]}],"git":{"createdTime":1763876189000,"updatedTime":1763876189000,"contributors":[{"name":"zihu97","email":"zihu@chipltech.com","commits":1}]},"readingTime":{"minutes":2.97,"words":890},"filePathRelative":"posts/linux/virtualization/qemu/MSI-X/QEMU MSIX.md","localizedDate":"2025年11月27日","excerpt":"<h1> VFIO框架源码分析（十）- QEMU VFIO 中断机制从 INTx 到 MSI-X 的模拟演进</h1>\\n<h2> 简介与背景</h2>\\n<p>中断是设备与 CPU 通信的命脉。</p>\\n<p>在直通场景下，硬件产生物理中断，必须准确、低延迟地投递给虚拟机的 vCPU。</p>\\n<p>QEMU 必须模拟 PCI 规范定义的三种中断模式：INTx（传统电平中断）、MSI（消息中断）和 MSI-X（扩展消息中断）。</p>\\n<p>其中，MSI-X 是现代高性能网卡和存储控制器的标配。</p>\\n<p>如果中断处理路径过长（例如经过 QEMU 用户态转发），会带来巨大的性能抖动。</p>","autoDesc":true}');export{t as data};
